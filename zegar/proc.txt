WYPISZ_TEKST PROC    		;Procedura wypisuj¹ca tekst na ekran. 
;Parametry procedury:
;BX - offset tekstu do wypisania,
;DI - przesuniêcie na ekranie
  PUSH AX         									       	
  MOV AX, ES      								
  PUSH AX          									
  MOV AX, 20H     		;Za³adowanie rejestru segmentowego ES selektorem pamiêci ekranu.   
  MOV ES, AX      						        	
  PUSH BX         										        
  WYPISZ_TEKST_:  		;Pocz¹tek pêtli wypisuj¹cej tekst. 	
    MOV AL, [BX]   		;Pobranie do al kolejnego znaku z ci¹gu.		    
    CMP AL, 0     		;Je¿eli jest on równy 0, to ca³y tekst zosta³ wypisany. 	
    JE NAPOTKANY_KONIEC_TEKSTU   		 	
    MOV [ES:DI], AL   	;W przeciwnym razie zapisanie w pamiêci ekranu, pod adresem 
;okreœlonym rejestrami ES:DI, znaku z AL. 			        
    	;Zwiêkszenie przesuniêcia w pamiêci ekranu:
    INC DI           							
    INC DI       						 
    INC BX   			;Przejœcie na nastêpny znak z ci¹gu do wypisania.
    JMP WYPISZ_TEKST_       	;Skok do pocz¹tku pêtli.					
  NAPOTKANY_KONIEC_TEKSTU:
;Przywrócenie rejestrów:
  POP BX    										
  POP AX     										
  MOV ES, AX  									
  POP AX     										
  RET         			;Powrót z procedury. 		    			
WYPISZ_TEKST ENDP

PM_WYMAZ_EKRAN     PROC  	;Procedura wymazuj¹ca ekran.    			
  PUSH AX            										
  PUSH DI             							
  MOV AX,32 							  			
  MOV ES,AX            		;ES za³adowany selektorem pamiêci ekranu.   			
  MOV AH, 00001111B 		;Atrybut znaku (kolor t³a + kolor znaku).           	
  MOV AL, ' '                   ;Ustawienie kodu znaku na spacje.  		          	
  MOV CX, 80*25                	;Ustawienie licznika pêtli na wartoœæ umo¿liwiaj¹c¹
                                ;zapis ca³ego ekranu (80 kolumn * 25 wiersze). 	
  XOR DI, DI                    									
;Pêtla czyszcz¹ca ekran:
  PETLA_WYMAZYWANIA_EKRANU:  							
    MOV [ES:DI], AX  		;Wpisanie s³owa znajduj¹cego siê w rejestrze AX
                         	;do obszaru pamiêci okreœlonego rejestrami ES:DI
                           	;(AH zawiera atrybut znak, natomiast al kod znaku)   	
;poni¿ej ustawienie pozycji w pamiêci ekranu na nastêpny znak:
    INC DI     									
    INC DI      									
  LOOP PETLA_WYMAZYWANIA_EKRANU 						
;przywrócenie rejestrów:
  POP DI   										
  POP AX  										
  RET      								
PM_WYMAZ_EKRAN		ENDP

DRUKUJ_HEX     PROC            		
;Parametry procedury:
;EAX - liczba do wydrukowania
  PUSH CX                 				
  PUSH DI                  				
  PUSH DX                  				
  PUSH AX                  				
  MOV DX, ES          				
  PUSH DX             				
  MOV DX, 32          				
  MOV ES, DX         				
  MOV DI, 2000        				
  MOV CX, 8           				
  PETLA_WYPISYWANIA:  		
    MOV EDX, 0FH   				
    ROL EAX, 4     				
    AND EDX, EAX    				
    CMP DL, 9     				
    JA DALEJ1     				
    ADD DL, '0' 				
    JMP KONIEC_DALEJ1 			
    DALEJ1:             				
    SUB DL, 10        			
    ADD DL, 'A'       			
    KONIEC_DALEJ1:      			
    PUSH AX             			
    MOV [ES:DI], DL			
    INC DI          				
    INC DI          				
    POP AX               			
  LOOP PETLA_WYPISYWANIA     	
  POP DX                       			
  MOV ES, DX                   			
  POP AX                          			
  POP DX                          			
  POP DI                          			
  POP CX                          			
  RET
DRUKUJ_HEX     ENDP

